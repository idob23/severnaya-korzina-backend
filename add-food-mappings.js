const { PrismaClient } = require('@prisma/client');
const prisma = new PrismaClient();

// ‚ö†Ô∏è –ó–ê–ú–ï–ù–ò ID –ù–ê –°–í–û–ò –∏–∑ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ —à–∞–≥–∞!
const CATEGORY_IDS = {
  '–°—É—Ö–æ—Ñ—Ä—É–∫—Ç—ã –∏ –æ—Ä–µ—Ö–∏': 2633,        // ‚Üê –ó–ê–ú–ï–ù–ò
  '–ú—ë–¥': 2634,                        // ‚Üê –ó–ê–ú–ï–ù–ò
  '–°–æ–ª—å, —Å–∞—Ö–∞—Ä, –º—É–∫–∞': 2635,         // ‚Üê –ó–ê–ú–ï–ù–ò
  '–ü—Ä–∏–ø—Ä–∞–≤—ã –∏ –±—ã—Å—Ç—Ä–æ–µ –ø–∏—Ç–∞–Ω–∏–µ': 2636, // ‚Üê –ó–ê–ú–ï–ù–ò
  '–°–æ—Å–∏—Å–∫–∏ –∏ —Å–∞—Ä–¥–µ–ª—å–∫–∏': 2637,       // ‚Üê –ó–ê–ú–ï–ù–ò
  '–û–≤–æ—â–∏ –∏ –≥—Ä–∏–±—ã –∑–∞–º–æ—Ä–æ–∂–µ–Ω–Ω—ã–µ': 2638, // ‚Üê –ó–ê–ú–ï–ù–ò
  '–Ø–≥–æ–¥—ã –∏ —Ñ—Ä—É–∫—Ç—ã –∑–∞–º–æ—Ä–æ–∂–µ–Ω–Ω—ã–µ': 2639, // ‚Üê –ó–ê–ú–ï–ù–ò
};

const newMappings = {
  // –°—É—Ö–æ—Ñ—Ä—É–∫—Ç—ã –∏ –æ—Ä–µ—Ö–∏
  '- –°—É—Ö–æ—Ñ—Ä—É–∫—Ç—ã, –æ—Ä–µ—Ö–∏': CATEGORY_IDS['–°—É—Ö–æ—Ñ—Ä—É–∫—Ç—ã –∏ –æ—Ä–µ—Ö–∏'],
  
  // –ú—ë–¥
  '- –ú–µ–¥': CATEGORY_IDS['–ú—ë–¥'],
  
  // –°–æ–ª—å, —Å–∞—Ö–∞—Ä, –º—É–∫–∞
  '- –°–æ–ª—å, —Å–∞—Ö–∞—Ä, –º—É–∫–∞ (C)': CATEGORY_IDS['–°–æ–ª—å, —Å–∞—Ö–∞—Ä, –º—É–∫–∞'],
  
  // –ü—Ä–∏–ø—Ä–∞–≤—ã –∏ –±—ã—Å—Ç—Ä–æ–µ –ø–∏—Ç–∞–Ω–∏–µ
  '- –ü—Ä–∏–ø—Ä–∞–≤—ã, —Å—É–ø—ã, –ø—é—Ä–µ –∫–∞—Ä—Ç–æ—Ñ–µ–ª—å–Ω–æ–µ, –ª–∞–ø—à–∞ –±—ã—Å—Ç—Ä–æ–≥–æ –ø—Ä–∏–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è (C)': CATEGORY_IDS['–ü—Ä–∏–ø—Ä–∞–≤—ã –∏ –±—ã—Å—Ç—Ä–æ–µ –ø–∏—Ç–∞–Ω–∏–µ'],
  
  // –°–æ—Å–∏—Å–∫–∏ –∏ —Å–∞—Ä–¥–µ–ª—å–∫–∏
  '- –°–æ—Å–∏—Å–∫–∏, —Å–∞—Ä–¥–µ–ª—å–∫–∏ –º–æ—Ä–æ–∂–µ–Ω—ã–µ': CATEGORY_IDS['–°–æ—Å–∏—Å–∫–∏ –∏ —Å–∞—Ä–¥–µ–ª—å–∫–∏'],
  
  // –û–≤–æ—â–∏ –∏ –≥—Ä–∏–±—ã –∑–∞–º–æ—Ä–æ–∂–µ–Ω–Ω—ã–µ
  '- –û–≤–æ—â–∏ –∏ –≥—Ä–∏–±—ã —Ñ–∞—Å–æ–≤–∞–Ω–Ω—ã–µ': CATEGORY_IDS['–û–≤–æ—â–∏ –∏ –≥—Ä–∏–±—ã –∑–∞–º–æ—Ä–æ–∂–µ–Ω–Ω—ã–µ'],
  '- –û–≤–æ—â–∏ –∏ –≥—Ä–∏–±—ã  –≤–µ—Å–æ–≤—ã–µ': CATEGORY_IDS['–û–≤–æ—â–∏ –∏ –≥—Ä–∏–±—ã –∑–∞–º–æ—Ä–æ–∂–µ–Ω–Ω—ã–µ'],
  '- –ì–æ—Ç–æ–≤—ã–µ –±–ª—é–¥–∞ –∏–∑ –æ–≤–æ—â–µ–π': CATEGORY_IDS['–û–≤–æ—â–∏ –∏ –≥—Ä–∏–±—ã –∑–∞–º–æ—Ä–æ–∂–µ–Ω–Ω—ã–µ'],
  '- –ö–∞—Ä—Ç–æ—Ñ–µ–ª—å —Ñ—Ä–∏, –∏–∑–¥–µ–ª–∏—è –∏–∑ –∫–∞—Ä—Ç–æ—Ñ–µ–ª—è': CATEGORY_IDS['–û–≤–æ—â–∏ –∏ –≥—Ä–∏–±—ã –∑–∞–º–æ—Ä–æ–∂–µ–Ω–Ω—ã–µ'],
  
  // –Ø–≥–æ–¥—ã –∏ —Ñ—Ä—É–∫—Ç—ã –∑–∞–º–æ—Ä–æ–∂–µ–Ω–Ω—ã–µ
  '- –Ø–≥–æ–¥—ã –∏ —Ñ—Ä—É–∫—Ç—ã –≤–µ—Å–æ–≤—ã–µ': CATEGORY_IDS['–Ø–≥–æ–¥—ã –∏ —Ñ—Ä—É–∫—Ç—ã –∑–∞–º–æ—Ä–æ–∂–µ–Ω–Ω—ã–µ'],
  '- –Ø–≥–æ–¥—ã –∏ —Ñ—Ä—É–∫—Ç—ã —Ñ–∞—Å–æ–≤–∞–Ω–Ω—ã–µ': CATEGORY_IDS['–Ø–≥–æ–¥—ã –∏ —Ñ—Ä—É–∫—Ç—ã –∑–∞–º–æ—Ä–æ–∂–µ–Ω–Ω—ã–µ'],
};

async function addMappings() {
  console.log('üìä –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–∞–ø–ø–∏–Ω–≥–æ–≤ –¥–ª—è –ø–∏—â–µ–≤—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π...\n');
  
  let added = 0;
  
  for (const [supplierCat, targetId] of Object.entries(newMappings)) {
    try {
      await prisma.supplierCategoryMapping.upsert({
        where: { supplierCategory: supplierCat },
        create: {
          supplierCategory: supplierCat,
          targetCategoryId: targetId,
          confidence: 'manual'
        },
        update: {
          targetCategoryId: targetId
        }
      });
      
      added++;
      console.log(`‚úÖ ${supplierCat} ‚Üí ID ${targetId}`);
    } catch (e) {
      console.error(`‚ùå ${supplierCat}: ${e.message}`);
    }
  }
  
  console.log(`\n‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –º–∞–ø–ø–∏–Ω–≥–æ–≤: ${added}`);
  
  const total = await prisma.supplierCategoryMapping.count();
  console.log(`üì¶ –í—Å–µ–≥–æ –≤ –ë–î: ${total}`);
  
  await prisma.$disconnect();
}

addMappings();
